(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(n){if(n.ep)return;n.ep=!0;const o=e(n);fetch(n.href,o)}})();function S(s){return Math.abs(Math.floor(s))}function c(s,t){return Math.random()*(t-s)+s}function a(s,t){return Math.floor(c(s,t+1))}function O(s,t,e,i){const n=Math.pow;return Math.sqrt(n(s-e,2)+n(t-i,2))}function E(s,t,e=1){if(s>360||s<0)throw new Error(`Expected hue 0-360 range, got \`${s}\``);if(t>100||t<0)throw new Error(`Expected lightness 0-100 range, got \`${t}\``);if(e>1||e<0)throw new Error(`Expected alpha 0-1 range, got \`${e}\``);return`hsla(${s}, 100%, ${t}%, ${e})`}const k=s=>{if(typeof s=="object"&&s!==null){if(typeof Object.getPrototypeOf=="function"){const t=Object.getPrototypeOf(s);return t===Object.prototype||t===null}return Object.prototype.toString.call(s)==="[object Object]"}return!1},R=["__proto__","constructor","prototype"],z=(...s)=>s.reduce((t,e)=>(Object.keys(e).forEach(i=>{R.includes(i)||(Array.isArray(t[i])&&Array.isArray(e[i])?t[i]=e[i]:k(t[i])&&k(e[i])?t[i]=z(t[i],e[i]):t[i]=e[i])}),t),{});function W(s,t){let e;return(...i)=>{e&&clearTimeout(e),e=setTimeout(()=>s(...i),t)}}class D{x;y;ctx;hue;friction;gravity;flickering;lineWidth;explosionLength;angle;speed;brightness;coordinates=[];decay;alpha=1;constructor({x:t,y:e,ctx:i,hue:n,decay:o,gravity:r,friction:h,brightness:u,flickering:m,lineWidth:b,explosionLength:w}){for(this.x=t,this.y=e,this.ctx=i,this.hue=n,this.gravity=r,this.friction=h,this.flickering=m,this.lineWidth=b,this.explosionLength=w,this.angle=c(0,Math.PI*2),this.speed=a(1,10),this.brightness=a(u.min,u.max),this.decay=c(o.min,o.max);this.explosionLength--;)this.coordinates.push([t,e])}update(t){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.alpha-=this.decay,this.alpha<=this.decay&&t()}draw(){const t=this.coordinates.length-1;this.ctx.beginPath(),this.ctx.lineWidth=this.lineWidth,this.ctx.fillStyle=E(this.hue,this.brightness,this.alpha),this.ctx.moveTo(this.coordinates[t][0],this.coordinates[t][1]),this.ctx.lineTo(this.x,this.y),this.ctx.strokeStyle=E(this.hue,this.flickering?c(0,this.brightness):this.brightness,this.alpha),this.ctx.stroke()}}class ${constructor(t,e){this.options=t,this.canvas=e,this.pointerDown=this.pointerDown.bind(this),this.pointerUp=this.pointerUp.bind(this),this.pointerMove=this.pointerMove.bind(this)}active=!1;x;y;get mouseOptions(){return this.options.mouse}mount(){this.canvas.addEventListener("pointerdown",this.pointerDown),this.canvas.addEventListener("pointerup",this.pointerUp),this.canvas.addEventListener("pointermove",this.pointerMove)}unmount(){this.canvas.removeEventListener("pointerdown",this.pointerDown),this.canvas.removeEventListener("pointerup",this.pointerUp),this.canvas.removeEventListener("pointermove",this.pointerMove)}usePointer(t,e){const{click:i,move:n}=this.mouseOptions;(i||n)&&(this.x=t.pageX-this.canvas.offsetLeft,this.y=t.pageY-this.canvas.offsetTop,this.active=e)}pointerDown(t){this.usePointer(t,this.mouseOptions.click)}pointerUp(t){this.usePointer(t,!1)}pointerMove(t){this.usePointer(t,this.active)}}class G{hue;rocketsPoint;opacity;acceleration;friction;gravity;particles;explosion;mouse;boundaries;sound;delay;brightness;decay;flickering;intensity;traceLength;traceSpeed;lineWidth;lineStyle;autoresize;constructor(){this.autoresize=!0,this.lineStyle="round",this.flickering=50,this.traceLength=3,this.traceSpeed=10,this.intensity=30,this.explosion=5,this.gravity=1.5,this.opacity=.5,this.particles=50,this.friction=.95,this.acceleration=1.05,this.hue={min:0,max:360},this.rocketsPoint={min:50,max:50},this.lineWidth={explosion:{min:1,max:3},trace:{min:1,max:2}},this.mouse={click:!1,move:!1,max:1},this.delay={min:30,max:60},this.brightness={min:50,max:80},this.decay={min:.015,max:.03},this.sound={enabled:!1,files:["explosion0.mp3","explosion1.mp3","explosion2.mp3"],volume:{min:4,max:8}},this.boundaries={debug:!1,height:0,width:0,x:50,y:50}}update(t){Object.assign(this,z(this,t))}}class U{constructor(t,e){this.options=t,this.render=e}tick=0;rafId=0;fps=60;tolerance=.1;now;mount(){this.now=performance.now();const t=1e3/this.fps,e=i=>{this.rafId=requestAnimationFrame(e);const n=i-this.now;n>=t-this.tolerance&&(this.render(),this.now=i-n%t,this.tick+=n*(this.options.intensity*Math.PI)/1e3)};this.rafId=requestAnimationFrame(e)}unmount(){cancelAnimationFrame(this.rafId)}}class F{constructor(t,e,i){this.options=t,this.updateSize=e,this.container=i}resizer;mount(){if(!this.resizer){const t=W(()=>this.updateSize(),100);this.resizer=new ResizeObserver(t)}this.options.autoresize&&this.resizer.observe(this.container)}unmount(){this.resizer&&this.resizer.unobserve(this.container)}}class H{constructor(t){this.options=t,this.init()}buffers=[];audioContext;onInit=!1;get isEnabled(){return this.options.sound.enabled}get soundOptions(){return this.options.sound}init(){!this.onInit&&this.isEnabled&&(this.onInit=!0,this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.loadSounds())}async loadSounds(){for(const t of this.soundOptions.files){const e=await(await fetch(t)).arrayBuffer();this.audioContext.decodeAudioData(e).then(i=>{this.buffers.push(i)}).catch(i=>{throw i})}}play(){if(this.isEnabled&&this.buffers.length){const t=this.audioContext.createBufferSource(),e=this.buffers[a(0,this.buffers.length-1)],i=this.audioContext.createGain();t.buffer=e,i.gain.value=c(this.soundOptions.volume.min/100,this.soundOptions.volume.max/100),i.connect(this.audioContext.destination),t.connect(i),t.start(0)}else this.init()}}class B{x;y;sx;sy;dx;dy;ctx;hue;speed;acceleration;traceLength;totalDistance;angle;brightness;coordinates=[];currentDistance=0;constructor({x:t,y:e,dx:i,dy:n,ctx:o,hue:r,speed:h,traceLength:u,acceleration:m}){for(this.x=t,this.y=e,this.sx=t,this.sy=e,this.dx=i,this.dy=n,this.ctx=o,this.hue=r,this.speed=h,this.traceLength=u,this.acceleration=m,this.totalDistance=O(t,e,i,n),this.angle=Math.atan2(n-e,i-t),this.brightness=a(50,70);this.traceLength--;)this.coordinates.push([t,e])}update(t){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.acceleration;const e=Math.cos(this.angle)*this.speed,i=Math.sin(this.angle)*this.speed;this.currentDistance=O(this.sx,this.sy,this.x+e,this.y+i),this.currentDistance>=this.totalDistance?t(this.dx,this.dy,this.hue):(this.x+=e,this.y+=i)}draw(){const t=this.coordinates.length-1;this.ctx.beginPath(),this.ctx.moveTo(this.coordinates[t][0],this.coordinates[t][1]),this.ctx.lineTo(this.x,this.y),this.ctx.strokeStyle=E(this.hue,this.brightness),this.ctx.stroke()}}class N{target;container;canvas;ctx;width;height;traces=[];explosions=[];waitStopRaf;running=!1;opts;sound;resize;mouse;raf;constructor(t,e={}){this.target=t,this.container=t,this.opts=new G,this.createCanvas(this.target),this.updateOptions(e),this.sound=new H(this.opts),this.resize=new F(this.opts,this.updateSize.bind(this),this.container),this.mouse=new $(this.opts,this.canvas),this.raf=new U(this.opts,this.render.bind(this))}get isRunning(){return this.running}get version(){return"2.10.8"}get currentOptions(){return this.opts}start(){this.running||(this.canvas.isConnected||this.createCanvas(this.target),this.running=!0,this.resize.mount(),this.mouse.mount(),this.raf.mount())}stop(t=!1){this.running&&(this.running=!1,this.resize.unmount(),this.mouse.unmount(),this.raf.unmount(),this.clear(),t&&this.canvas.remove())}async waitStop(t){if(this.running)return new Promise(e=>{this.waitStopRaf=()=>{this.waitStopRaf&&(requestAnimationFrame(this.waitStopRaf),!this.traces.length&&!this.explosions.length&&(this.waitStopRaf=null,this.stop(t),e()))},this.waitStopRaf()})}pause(){this.running=!this.running,this.running?this.raf.mount():this.raf.unmount()}clear(){this.ctx&&(this.traces=[],this.explosions=[],this.ctx.clearRect(0,0,this.width,this.height))}launch(t=1){for(let e=0;e<t;e++)this.createTrace();this.waitStopRaf||(this.start(),this.waitStop())}updateOptions(t){this.opts.update(t)}updateSize({width:t=this.container.clientWidth,height:e=this.container.clientHeight}={}){this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e,this.updateBoundaries({...this.opts.boundaries,width:t,height:e})}updateBoundaries(t){this.updateOptions({boundaries:t})}createCanvas(t){t instanceof HTMLCanvasElement?(t.isConnected||document.body.append(t),this.canvas=t):(this.canvas=document.createElement("canvas"),this.container.append(this.canvas)),this.ctx=this.canvas.getContext("2d"),this.updateSize()}render(){if(!this.ctx||!this.running)return;const{opacity:t,lineStyle:e,lineWidth:i}=this.opts;this.ctx.globalCompositeOperation="destination-out",this.ctx.fillStyle=`rgba(0, 0, 0, ${t})`,this.ctx.fillRect(0,0,this.width,this.height),this.ctx.globalCompositeOperation="lighter",this.ctx.lineCap=e,this.ctx.lineJoin="round",this.ctx.lineWidth=c(i.trace.min,i.trace.max),this.initTrace(),this.drawTrace(),this.drawExplosion()}createTrace(){const{hue:t,rocketsPoint:e,boundaries:i,traceLength:n,traceSpeed:o,acceleration:r,mouse:h}=this.opts;this.traces.push(new B({x:this.width*a(e.min,e.max)/100,y:this.height,dx:this.mouse.x&&h.move||this.mouse.active?this.mouse.x:a(i.x,i.width-i.x*2),dy:this.mouse.y&&h.move||this.mouse.active?this.mouse.y:a(i.y,i.height*.5),ctx:this.ctx,hue:a(t.min,t.max),speed:o,acceleration:r,traceLength:S(n)}))}initTrace(){if(this.waitStopRaf)return;const{delay:t,mouse:e}=this.opts;(this.raf.tick>a(t.min,t.max)||this.mouse.active&&e.max>this.traces.length)&&(this.createTrace(),this.raf.tick=0)}drawTrace(){let t=this.traces.length;for(;t--;)this.traces[t].draw(),this.traces[t].update((e,i,n)=>{this.initExplosion(e,i,n),this.sound.play(),this.traces.splice(t,1)})}initExplosion(t,e,i){const{particles:n,flickering:o,lineWidth:r,explosion:h,brightness:u,friction:m,gravity:b,decay:w}=this.opts;let I=S(n);for(;I--;)this.explosions.push(new D({x:t,y:e,ctx:this.ctx,hue:i,friction:m,gravity:b,flickering:a(0,100)<=o,lineWidth:c(r.explosion.min,r.explosion.max),explosionLength:S(h),brightness:u,decay:w}))}drawExplosion(){let t=this.explosions.length;for(;t--;)this.explosions[t].draw(),this.explosions[t].update(()=>{this.explosions.splice(t,1)})}}const Y=document.querySelector(".game__sea"),_=document.querySelector(".game__score"),j=document.querySelector(".bin-score"),l=document.querySelector(".game__legend"),d=document.querySelector(".game__message"),v=document.querySelector(".game__start-button"),J=document.querySelector(".game__trash-area"),f=document.querySelector(".game__overlay"),C=document.querySelector(".game__fireworks");if(!l||!v||!Y||!_||!j||!d||!f||!C)throw new Error("One or more elements were not found");const M=[{emoji:"🥤",points:10},{emoji:"🦴",points:6},{emoji:"🍕",points:7},{emoji:"🧃",points:20},{emoji:"👕",points:11},{emoji:"🧤",points:14},{emoji:"🥫",points:22},{emoji:"🧋",points:18}];let g=0,x=!1,y=[];const K=300;let p=0;const P=5,q=["rgba(0,0,0,0)","rgba(210,180,140,0.2)","rgba(160,82,45,0.3)","rgba(139,69,19,0.4)","rgba(92,64,51,0.5)","rgba(62,39,35,0.7)"],V=()=>{let s="rgba(0,0,0,0)";p>0&&p<=P&&(s=q[p]),f.style.backgroundColor=s},A=()=>{_.textContent=g.toString(),j.textContent=g.toString()},X=()=>{l.style.display="block",l.innerHTML="",l.innerHTML='<div class="legend__item">1 emoji = 10 points</div>'},L=s=>{if(!x)return;const t=Math.floor(Math.random()*M.length),e=M[t],i=document.createElement("div");i.classList.add("trash"),i.textContent=e.emoji,i.style.position="absolute";const n=Math.random()*80,o=Math.random()*90;i.style.top=`${n}%`,i.style.left=`${o}%`,i.style.fontSize="3rem",i.style.cursor="grab",J?.appendChild(i);const r=window.setTimeout(()=>{if(i.remove(),p++,V(),p>P){T(!1);return}L(s)},s);y.push(r),i.addEventListener("click",()=>{if(clearTimeout(r),i.remove(),g+=e.points,A(),g>=K){T(!0);return}L(s)})},Q=()=>{x=!1,y.forEach(s=>clearTimeout(s)),y=[],document.querySelectorAll(".trash").forEach(s=>s.remove()),l.style.display="none",v.textContent="Start Game"},T=s=>{if(x=!1,y.forEach(t=>clearTimeout(t)),y=[],document.querySelectorAll(".trash").forEach(t=>t.remove()),l.style.display="none",s){d.textContent="🎉 YOU WIN! 🎉";const t=new N(C,{hue:{min:0,max:360},delay:{min:15,max:30},explosion:5,particles:50,brightness:{min:50,max:80},autoresize:!0});t.start(),setTimeout(()=>{t.stop(),C.innerHTML="",f.style.backgroundColor="rgba(0,0,0,0)"},3e3)}else f.style.backgroundColor=q[5],d.textContent="💥 GAME OVER! You missed too many times 💥",setTimeout(()=>{f.style.backgroundColor="rgba(0,0,0,0)"},3e3);d.style.display="block",v.textContent="Start Game"},Z=()=>{x?Q():(x=!0,v.textContent="Stop",g=0,p=0,A(),l.style.display="none",d.style.display="none",d.textContent="",document.querySelectorAll(".trash").forEach(s=>s.remove()),X(),L(1300))};v.addEventListener("click",Z);
